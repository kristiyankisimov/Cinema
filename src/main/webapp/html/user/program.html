<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" type="text/css"
	href="./../../styles/program-style.css">
<script type="text/javascript" src="./../../js/jquery-2.1.3.min.js"></script>
<script type="text/javascript">
	/* $(document).ready(function() {
		$('.bookaticket').click(function() {
			window.location.replace("seat-reservation.html");
		});
	}); */
	drawTableWithScreenings();
	function drawTableWithScreenings() {

		$.ajax({
			url : './../../rest/screenings',
			type : "GET",
			dataType : "json",
			success : function(data) {
				renderTable(data);
			}
		});
	}
	function renderTable(data) {
		$("#screenings_table tr:gt(0)").remove();
		var screenings = data.screening;
		for (var i = 0; i < screenings.length; i++) {
			renderRow(screenings[i]);
		}
	}

	function renderRow(rowData) {
		var row = $("<tr />")
		$("#screenings_table").append(row);
		row.append($("<td>" + rowData.date + "</td>"));
		row.append($('<td><a id="' + rowData.movie.id
				+ '" onclick="showMovieInformation(this)" href="#">'
				+ rowData.movie.title + "</a></td>"));
		row.append($("<td>" + rowData.hall.number + "</td>"));
		row.append($("<td>" + rowData.movie.price + "</td>"));
		row.append($("<td>" + rowData.movie.length + "</td>"));

		var BookTd = $("<td />");
		var link = $('<button onclick="bookATicket()"> Book a Ticket </button>');
		BookTd.append(link);
		row.append(BookTd);
		link.click(function() {

		});

		row.append($("<td/>"));
	}

	function bookATicket() {
		window.location.replace("seat-reservation.html");
	}

	function showMovieInformation(object) {

		$.ajax({
			url : './../../rest/movies/' + object.id,
			type : "GET",
			dataType : "json",
			success : function(data) {
				console.log(data);
				window.location.replace("movie-information.html");
			}
		});
	}
</script>
</head>
<body>
	<div id="masthead">

		<h1>
			<br> Cinema web app!
		</h1>
		<br>


		<h2>
			The most interesting movies only here :) <br> <br>
		</h2>
		<img
			src="data:image/png;base64,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"
			style="margin-left: 175px">

		<div id="topnav" class="topnav">
			<div id="pnlLogin">

				<form id="logout_form" name="logout_form" method="get"
					action="./../../rest/user/logout">
					<button type="submit" class="btn btn-default">Log out</button>
				</form>

			</div>
		</div>
	</div>
	<div id="content">
		<ul id="nav">

			<li><a href="program.html">Programs</a></li>
			<li><a href="history.html">History</a></li>
			<li><a href="contact.html">Contact</a></li>
			<li><a href="home.html">Home</a></li>
		</ul>


		<div>
			<table id="screenings_table" class="table">
				<tr>
					<th>Date</th>
					<th>Movie</th>
					<th>Hall</th>
					<th>Price</th>
					<th>Duration</th>
				</tr>
			</table>
		</div>

	</div>

</body>
</html>