<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Log in</title>
<script type="text/javascript" src="js/jquery-2.1.3.min.js"></script>

<script type="text/javascript">
	$(function() {
		$("#header").load("header.html");
		$("#footer").load("footer.html");
	});

	function login() {
		var username = $("#userName").val();
		var password = $("#pwd").val();

		if (username == "" || password == "") {
			alert("Username and password should not be empty.");
			return;
		}

		var credentials = {
			user : {
				userName : username,
				password : password
			}
		}

		$.ajax({
			url : 'rest/user/login',
			type : "POST",
			contentType : "application/json;charset=UTF-8",
			data : JSON.stringify(credentials),
			statusCode : {
				401 : function() {
					alert("Authentication failed");
					$("#reset_login").trigger("click");
				},
				200 : function() {
					window.location.replace("index.html");
				}
			}
		});
	}
</script>
</head>
<body>
	<div id="header"></div>
	<h1 align="center">
		<b>Log in</b>
	</h1>

	<div id="registration_link" align="right">
		<a href="register.html" class="register_form"> Register </a>
	</div>

	<form id="login_form" role="form" method="post">
		<div class="form-group">
			<label for="userName">Username:</label> <input type="text"
				class="form-control" name="username" id="userName" value="">
			<div class="error hidden"></div>
		</div>
		<div class="form-group">
			<label for="pwd">Password:</label> <input type="password"
				class="form-control" name="password" id="pwd" value="">
		</div>

		<button type="reset" class="btn btn-default" id="reset_login">Clear</button>
		<button type="button" onclick="login()" class="btn btn-default">Log
			in</button>
	</form>

	<div id="footer"></div>
</body>
</html>